# JWT에 대해서 제대로 이해하기

## Refresh Token
- https://tecoble.techcourse.co.kr/post/2021-10-20-refresh-token/
### 정리
- 액세스 토큰은 클라이언트단에만 저장이 되는 거기 때문에, 탈취되면 해커가 액세스 토큰이 유효한 동안에는 일반 사용자처럼 이용할 수 있다.
- 그렇기 때문에 액세스 토큰의 유효기간은 길면 안된다.
- refresh token은 access token을 재발급받을 수 있는 token이다. 
- refresh token은 서버에 저장이 된다.

## 토큰 기반 이증에서 bearer 는 무엇일까?
- https://velog.io/@cada/%ED%86%A0%EA%B7%BC-%EA%B8%B0%EB%B0%98-%EC%9D%B8%EC%A6%9D%EC%97%90%EC%84%9C-bearer%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C#bearer

## 참고링크: https://soyoonty.tistory.com/136
## 세션 기반 로그인과 토큰 기반 로그인의 차이점
### 세션 기반 자동 로그인: 
- 로그인 한다 -> 로그인한 상태라는 것을 서버 혹은 디비에 저장.
- 서버와 클라이언트가 연결된 상태로(stateful), 다른 요청들을 처리하게 된다.
- 서버가 클라이언트와 연결된 상태를 유지해야 하기 때문에 로그인한 유저가 많아진다면 서버가 무거워지거, 서버의 확장이 어려울 수 있다. 

### 토큰 기반 자동 로그인:
- 로그인할 때 서버가 클라이언트에게 토큰을 준다.
- 클라이언트는 매 요청시마다 토큰을 같이 보내준다.
- 서버는 연결상태(로그인여부)를 확인할 필요없이 토큰만 있으면 작업을 처리한다.
- 서버와 클라이언트가 계속 연결되어 있는 것이 아니기 때문에 확장성이 좋고, 여러 도메인에서도 이용할 수 있고, 쿠키를 전달함으로써 발생할 수 있는 보안 이슈에도 강하다.

### 그래서 JWT란?
- jwt가 필요한 정보를 가지고 있고, 헤더에 넣어서 API를 요청하는 방식.

### refresh token
- 로그인할 때 액세스토큰 및 리프레시 토큰을 모두 저장
- 액세스 토큰이 만료되면 리프레시 토큰을 이용해서 새로운 토큰을 저장.
- 새로운 토큰으로 다시 api 요청
- 리프레시 토큰까지 만료되면 로그인 화면으로 이동.
- 리프레시 토큰은 언제 요청? 처음 서비스에 진입했을 때 항상 새로운 토큰을 발급.
